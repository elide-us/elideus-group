// ================================================
// WARNING: This file is automatically generated.
// Do not modify it by hand. Your changes will be
// overwritten the next time the generator runs.
// ================================================

import axios from "axios";

export interface BrowserSessionData1 {
  bearerToken: string | null;
  rotationToken: string | null;
  rotationExpires: any | null;
}
export interface RPCRequest {
  op: string;
  payload: any | null;
  version: number;
  timestamp: any | null;
  metadata: any | null;
}
export interface RPCResponse {
  op: string;
  payload: any;
  version: number;
  timestamp: any;
  metadata: any | null;
}
export interface UserData {
  bearerToken: string;
}
export interface AccountRoleDelete1 {
  name: string;
}
export interface AccountRoleDelete2 {
  name: string;
}
export interface AccountRoleMemberUpdate1 {
  role: string;
  userGuid: string;
}
export interface AccountRoleMemberUpdate2 {
  role: string;
  userGuid: string;
}
export interface AccountRoleMembers1 {
  members: UserListItem[];
  nonMembers: UserListItem[];
}
export interface AccountRoleMembers2 {
  members: UserListItem[];
  nonMembers: UserListItem[];
}
export interface AccountRoleUpdate1 {
  name: string;
  display: string;
  bit: number;
}
export interface AccountRoleUpdate2 {
  name: string;
  display: string;
  bit: number;
}
export interface AccountRolesList1 {
  roles: RoleItem[];
}
export interface AccountRolesList2 {
  roles: RoleItem[];
}
export interface RoleItem {
  name: string;
  display: string;
  bit: number;
}
export interface UserListItem {
  guid: string;
  displayName: string;
}
export interface AccountUserCreditsUpdate1 {
  userGuid: string;
  credits: number;
}
export interface AccountUserCreditsUpdate2 {
  userGuid: string;
  credits: number;
}
export interface AccountUserDisplayNameUpdate1 {
  userGuid: string;
  displayName: string;
}
export interface AccountUserDisplayNameUpdate2 {
  userGuid: string;
  displayName: string;
}
export interface AccountUserProfile1 {
  guid: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: any;
  profilePicture: any;
  credits: any;
  storageUsed: any;
  storageEnabled: any;
  displayEmail: boolean;
  rotationToken: any;
  rotationExpires: any;
}
export interface AccountUserProfile2 {
  guid: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: any;
  profilePicture: any;
  credits: any;
  storageUsed: any;
  storageEnabled: any;
  displayEmail: boolean;
  rotationToken: any;
  rotationExpires: any;
}
export interface AccountUserRoles1 {
  roles: string[];
}
export interface AccountUserRoles2 {
  roles: string[];
}
export interface AccountUserRolesUpdate1 {
  userGuid: string;
  roles: string[];
}
export interface AccountUserRolesUpdate2 {
  userGuid: string;
  roles: string[];
}
export interface AccountUsersList1 {
  users: UserListItem[];
}
export interface AccountUsersList2 {
  users: UserListItem[];
}
export interface SystemRoleDelete1 {
  name: string;
}
export interface SystemRoleDelete2 {
  name: string;
}
export interface SystemRoleMemberUpdate1 {
  role: string;
  userGuid: string;
}
export interface SystemRoleMemberUpdate2 {
  role: string;
  userGuid: string;
}
export interface SystemRoleMembers1 {
  members: any[];
  nonMembers: any[];
}
export interface SystemRoleMembers2 {
  members: any[];
  nonMembers: any[];
}
export interface SystemRoleUpdate1 {
  name: string;
  display: string;
  bit: number;
}
export interface SystemRoleUpdate2 {
  name: string;
  display: string;
  bit: number;
}
export interface SystemRolesList1 {
  roles: RoleItem[];
}
export interface SystemRolesList2 {
  roles: RoleItem[];
}
export interface SystemRouteDelete1 {
  path: string;
}
export interface SystemRouteDelete2 {
  path: string;
}
export interface SystemRouteItem {
  path: string;
  name: string;
  icon: string;
  sequence: number;
  requiredRoles: string[];
}
export interface SystemRouteUpdate1 {
  path: string;
  name: string;
  icon: string;
  sequence: number;
  requiredRoles: string[];
}
export interface SystemRouteUpdate2 {
  path: string;
  name: string;
  icon: string;
  sequence: number;
  requiredRoles: string[];
}
export interface SystemRoutesList1 {
  routes: SystemRouteItem[];
}
export interface SystemRoutesList2 {
  routes: SystemRouteItem[];
}
export interface SystemUserCreditsUpdate1 {
  userGuid: string;
  credits: number;
}
export interface SystemUserCreditsUpdate2 {
  userGuid: string;
  credits: number;
}
export interface SystemUserProfile1 {
  guid: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: any;
  profilePicture: any;
  credits: any;
  storageUsed: any;
  storageEnabled: any;
  displayEmail: boolean;
  rotationToken: any;
  rotationExpires: any;
}
export interface SystemUserProfile2 {
  guid: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: any;
  profilePicture: any;
  credits: any;
  storageUsed: any;
  storageEnabled: any;
  displayEmail: boolean;
  rotationToken: any;
  rotationExpires: any;
}
export interface SystemUserRoles1 {
  roles: string[];
}
export interface SystemUserRoles2 {
  roles: string[];
}
export interface SystemUserRolesUpdate1 {
  userGuid: string;
  roles: string[];
}
export interface SystemUserRolesUpdate2 {
  userGuid: string;
  roles: string[];
}
export interface SystemUsersList1 {
  users: UserListItem[];
}
export interface SystemUsersList2 {
  users: UserListItem[];
}
export interface ConfigItem {
  key: string;
  value: string;
}
export interface SystemConfigDelete1 {
  key: string;
}
export interface SystemConfigDelete2 {
  key: string;
}
export interface SystemConfigList1 {
  items: ConfigItem[];
}
export interface SystemConfigList2 {
  items: ConfigItem[];
}
export interface SystemConfigUpdate1 {
  key: string;
  value: string;
}
export interface SystemConfigUpdate2 {
  key: string;
  value: string;
}
export interface FrontendVarsFfmpegVersion1 {
  ffmpeg_version: string;
}
export interface FrontendVarsHostname1 {
  hostname: string;
}
export interface FrontendVarsHostname2 {
  hostname: string;
}
export interface FrontendVarsRepo1 {
  repo: string;
}
export interface FrontendVarsRepo2 {
  repo: string;
}
export interface FrontendVarsVersion1 {
  version: string;
}
export interface FrontendVarsVersion2 {
  version: string;
}
export interface ViewDiscord1 {
  content: string;
}
export interface ViewDiscord2 {
  content: string;
}
export interface FrontendLinksHome1 {
  links: LinkItem[];
}
export interface FrontendLinksHome2 {
  links: LinkItem[];
}
export interface FrontendLinksRoutes1 {
  routes: RouteItem[];
}
export interface FrontendLinksRoutes2 {
  routes: RouteItem[];
}
export interface LinkItem {
  title: string;
  url: string;
}
export interface RouteItem {
  path: string;
  name: string;
  icon: string;
}
export interface FrontendUserProfileData1 {
  bearerToken: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: string | null;
  profilePicture: string | null;
  credits: number | null;
  storageUsed: number | null;
  storageEnabled: boolean | null;
  displayEmail: boolean;
  roles: string[];
  rotationToken: string | null;
  rotationExpires: any | null;
}
export interface FrontendUserSetDisplayName1 {
  bearerToken: string;
  displayName: string;
}
export interface AuthSessionTokens1 {
  bearerToken: string;
  rotationToken: string;
  rotationExpires: any;
}
export interface AuthGoogleLoginData1 {
  bearerToken: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: string | null;
  profilePicture: string | null;
  credits: number | null;
  rotationToken: string | null;
  rotationExpires: any | null;
}
export interface AuthMicrosoftLoginData1 {
  bearerToken: string;
  defaultProvider: string;
  username: string;
  email: string;
  backupEmail: string | null;
  profilePicture: string | null;
  credits: number | null;
  rotationToken: string | null;
  rotationExpires: any | null;
}
export interface FileItem {
  name: string;
  url: string;
  contentType: string | null;
}
export interface StorageFileDelete1 {
  bearerToken: string;
  filename: string;
}
export interface StorageFileUpload1 {
  bearerToken: string;
  filename: string;
  dataUrl: string;
  contentType: string;
}
export interface StorageFilesList1 {
  files: FileItem[];
}

export async function rpcCall<T>(op: string, payload: any = null): Promise<T> {
    const request: RPCRequest = {
        op,
        payload,
        version: 1,
        timestamp: Date.now(),
        metadata: null,
    };
    const headers: Record<string, string> = {};
    if (typeof localStorage !== 'undefined') {
        try {
            const raw = localStorage.getItem('authTokens');
            if (raw) {
                const { bearerToken } = JSON.parse(raw);
                if (bearerToken) headers.Authorization = `Bearer ${bearerToken}`;
            }
        } catch {
            /* ignore token parsing errors */
        }
    }
    const response = await axios.post<RPCResponse>('/rpc', request, { headers });
    return response.data.payload as T;
}
