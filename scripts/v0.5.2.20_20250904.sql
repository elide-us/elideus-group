CREATE TABLE auth_providers (recid int NOT NULL, element_name nvarchar(1024) NOT NULL, element_display nvarchar(1024), PRIMARY KEY (recid));
CREATE TABLE account_users (recid int NOT NULL, element_guid uniqueidentifier NOT NULL, element_rotkey nvarchar(MAX) NOT NULL, element_rotkey_iat datetimeoffset DEFAULT (sysdatetimeoffset()) NOT NULL, element_rotkey_exp datetimeoffset NOT NULL, element_email nvarchar(1024) NOT NULL, element_display nvarchar(1024) NOT NULL, providers_recid int, element_optin bit DEFAULT ((0)), PRIMARY KEY (recid), FOREIGN KEY (providers_recid) REFERENCES auth_providers(recid));
CREATE INDEX UQ__account___D23E50605BA10A17 ON account_users (element_guid);
CREATE TABLE users_sessions (element_guid uniqueidentifier NOT NULL, users_guid uniqueidentifier NOT NULL, element_created_at datetimeoffset DEFAULT (sysdatetimeoffset()) NOT NULL, PRIMARY KEY (element_guid), FOREIGN KEY (users_guid) REFERENCES account_users(element_guid));
CREATE TABLE users_auth (recid int NOT NULL, users_guid uniqueidentifier NOT NULL, providers_recid int NOT NULL, element_identifier uniqueidentifier NOT NULL, element_linked bit DEFAULT ((0)) NOT NULL, PRIMARY KEY (recid), FOREIGN KEY (providers_recid) REFERENCES auth_providers(recid), FOREIGN KEY (users_guid) REFERENCES account_users(element_guid));
CREATE INDEX UQ_users_auth_element_identifier ON users_auth (element_identifier);
CREATE TABLE frontend_links (recid int NOT NULL, element_sequence int DEFAULT ((0)) NOT NULL, element_title nvarchar(MAX), element_url nvarchar(MAX), PRIMARY KEY (recid));
CREATE TABLE frontend_routes (recid int NOT NULL, element_enablement nvarchar(1) DEFAULT ('0') NOT NULL, element_roles bigint DEFAULT ((0)) NOT NULL, element_sequence int DEFAULT ((0)) NOT NULL, element_path nvarchar(512), element_name nvarchar(256), element_icon nvarchar(256), PRIMARY KEY (recid));
CREATE TABLE system_config (recid int NOT NULL, element_key nvarchar(1024), element_value nvarchar(MAX), PRIMARY KEY (recid));
CREATE TABLE users_credits (users_guid uniqueidentifier NOT NULL, element_credits int NOT NULL, element_reserve int, PRIMARY KEY (users_guid), FOREIGN KEY (users_guid) REFERENCES account_users(element_guid));
CREATE TABLE users_enablements (users_guid uniqueidentifier NOT NULL, element_enablements nvarchar(MAX) DEFAULT ('0') NOT NULL, PRIMARY KEY (users_guid), FOREIGN KEY (users_guid) REFERENCES account_users(element_guid));
CREATE TABLE users_profileimg (users_guid uniqueidentifier NOT NULL, element_base64 nvarchar(MAX), providers_recid int NOT NULL, FOREIGN KEY (providers_recid) REFERENCES auth_providers(recid), FOREIGN KEY (users_guid) REFERENCES account_users(element_guid));
CREATE TABLE users_roles (users_guid uniqueidentifier NOT NULL, element_roles bigint DEFAULT ((0)) NOT NULL, PRIMARY KEY (users_guid), FOREIGN KEY (users_guid) REFERENCES account_users(element_guid));
CREATE TABLE system_roles (recid int NOT NULL, element_mask bigint DEFAULT ((0)) NOT NULL, element_enablement nvarchar(1) DEFAULT ('0') NOT NULL, element_name nvarchar(1024) NOT NULL, element_display nvarchar(1024), PRIMARY KEY (recid));
CREATE TABLE sessions_devices (element_guid uniqueidentifier NOT NULL, sessions_guid uniqueidentifier NOT NULL, element_token nvarchar(MAX) NOT NULL, element_token_iat datetimeoffset DEFAULT (sysdatetimeoffset()) NOT NULL, element_token_exp datetimeoffset NOT NULL, element_device_fingerprint nvarchar(512), element_user_agent nvarchar(1024), element_ip_last_seen nvarchar(64), element_revoked_at datetimeoffset, providers_recid int DEFAULT ((0)) NOT NULL, PRIMARY KEY (element_guid), FOREIGN KEY (sessions_guid) REFERENCES users_sessions(element_guid), FOREIGN KEY (providers_recid) REFERENCES auth_providers(recid));
CREATE TABLE sysdiagrams (name nvarchar(128) NOT NULL, principal_id int NOT NULL, diagram_id int NOT NULL, version int, definition varbinary(MAX), PRIMARY KEY (diagram_id));
CREATE INDEX UK_principal_name ON sysdiagrams (principal_id, name);